syntax = "proto3";

import "../protocol/transactions.proto";

service Gossip {
  rpc BroadcastMessage (BroadcastMessageInput) returns (BroadcastMessageOutput);
  rpc UnicastMessage (UnicastMessageInput) returns (UnicastMessageOutput);
}

message BroadcastMessageInput {
  GossipMessage gossip_message = 1;
}

message BroadcastMessageOutput {
  // empty
}

message UnicastMessageInput {
  GossipMessage gossip_message = 1;
}

message UnicastMessageOutput {
  // empty
}

message P2PEnvelope {
  repeated GossipMessage message = 1;
  bytes signature = 2;
}

message GossipMessage {
  TargetType target_type = 1;
  string target = 2;
  string message_type = 3;
  uint32 virtual_chain = 4;
  string message_type = 5;
  bytes buffer = 6;
//  uint32 qos = 7;
}

enum TargetType {
  BROADCAST = 0;
  UNICAST = 1;
}
