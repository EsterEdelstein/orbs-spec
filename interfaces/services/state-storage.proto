syntax = "proto3";

service StateStorage {
  rpc ReadKeys (ReadKeysInput) returns (ReadKeysOutput);
  rpc CommitStateDiff(CommitStateDiffInput) returns (CommitStateDiffOutput);
  rpc GetStateHash(GetStateHashInput) returns (GetStateHash);
}

message ReadKeysInput {
  Uint64 block_height = 1;
  Address contract_address = 2;
  repeated RIP160SHA256 keys = 3;
}

message ReadKeysOutput {
  map<RIP160SHA256,String> values = 1;
}

message CommitStateDiffInput {
  Uint64 block_height = 1;
  repeated SCStateDiff sc_state_diff = 2;
}

message CommitStateDiffOutput {

}

message GetStateHashInput {
  Uint64 block_height = 1;
}

message GetStateHashOutput {
  StateHashStatus status = 1;
  SHA256 state_root_hash = 2;
}

enum StateHashStatus {
  VALID = 0;
  NOT_UPDATED = 1;
}